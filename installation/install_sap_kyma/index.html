
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.31">
    
    
      
        <title>Installation for SAP BTP Kyma and HANA Cloud - Graph Universe Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.3cba04c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#installation-for-sap-btp-kyma-and-hana-cloud" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Graph Universe Documentation" class="md-header__button md-logo" aria-label="Graph Universe Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Graph Universe Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Installation for SAP BTP Kyma and HANA Cloud
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Graph Universe Documentation" class="md-nav__button md-logo" aria-label="Graph Universe Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Graph Universe Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#check-the-hana-database" class="md-nav__link">
    <span class="md-ellipsis">
      Check the HANA database
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prepare-the-kyma-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Prepare the Kyma cluster
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prepare the Kyma cluster">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-namespace" class="md-nav__link">
    <span class="md-ellipsis">
      Create a namespace
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-the-secrets-for-hana" class="md-nav__link">
    <span class="md-ellipsis">
      Create the secrets for HANA
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Create deployment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-the-guv-api-service" class="md-nav__link">
    <span class="md-ellipsis">
      Check the GUV API Service
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion-and-further-information" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion and further information
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Conclusion and further information">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scalability" class="md-nav__link">
    <span class="md-ellipsis">
      Scalability
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security" class="md-nav__link">
    <span class="md-ellipsis">
      Security
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-services" class="md-nav__link">
    <span class="md-ellipsis">
      Additional services
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="installation-for-sap-btp-kyma-and-hana-cloud">Installation for SAP BTP Kyma and HANA Cloud</h1>
<p>The Graph Universe (GUV) can be installed on the SAP Business Technology Platform (BTP). The SAP Kyma environment is a Kubernetes (K8S) environment within the SAP BTP. As a persistence layer the SAP HANA Cloud database can be used. </p>
<p>The required installation steps are described here.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>The following components are required:</p>
<ol>
<li>SAP BTP account</li>
<li>SAP Kyma Cluster</li>
<li>SAP HANA Cloud Instance</li>
</ol>
<p>You can get a trial acess for free. See the <a href="https://developers.sap.com/tutorial-navigator.html">SAP Developer Tutorials</a> and search for "Kyma" and "HANA".</p>
<h2 id="check-the-hana-database">Check the HANA database</h2>
<p>Login to your SAP BTP subaccount and select "Instances and Subscriptions". You should find an installed "SAP HANA Cloud" Application. </p>
<p><img alt="SAP BTP Instances" src="../res/sap_btp_instances.png" /></p>
<p>Enter the "HANA Cloud Central" Cockpit by selecting the "SAP HANA Cloud" application.</p>
<p><img alt="SAP HANA Cloud Central Cockpit" src="../res/sap_hana_cloud_central.png" />.</p>
<p>Enter the context menu via "Action" and select "Copy SQL Endpoint". </p>
<p>Your copied endpoint should be like this:</p>
<p><code>0cf183xx-xxxa-xx71-83xx-5ff37xxx324.hana.trial-us10.hanacloud.ondemand.com:443</code></p>
<p>Check the DB user and password to access this instance.  </p>
<h2 id="prepare-the-kyma-cluster">Prepare the Kyma cluster</h2>
<p>Go to your SAP BTP subaccount "Overview" and check the "Kyma Environment". </p>
<p><img alt="SAP BTP Kyma" src="../res/sap_btp_kyma.png" /></p>
<p>Select the "Link to dashboard".</p>
<p><img alt="SAP Kyma Dashboard" src="../res/sap_btp_kyma_dashboard.png" /></p>
<h3 id="create-a-namespace">Create a namespace</h3>
<p>Select <code>Namespaces</code> and <code>Create</code>. </p>
<p><img alt="SAP Kyma Namespaces" src="../res/sap_btp_kyma_namespace.png" /></p>
<p>Switch to the "Form" view. Enter a valid name: e.g. <code>guv-demo</code> and confirm with <code>Create</code>. </p>
<p><img alt="SAP Kyma Namespace creation" src="../res/sap_btp_kyma_namespace_form.png" /></p>
<p>A new Kyma namespace is visible and You will see an empty dashboard.</p>
<p><img alt="SAP Kyma Namespace dashboard" src="../res/sap_btp_kyma_namespace_dashboard.png" /></p>
<h3 id="create-the-secrets-for-hana">Create the secrets for HANA</h3>
<p>In this step You will create a secret for storing the secret connection information to the HANA Cloud database.</p>
<p>Enter <code>Configuration</code> and <code>Secret</code>.</p>
<p><img alt="SAP Kyma Secrets" src="../res/sap_btp_kyma_secrets.png" /></p>
<p>Select <code>Create</code>. </p>
<p>Fill the scret form:
- select the <code>Form</code> view if not selected
- use <code>guv-db</code>as name for the secret
- select <code>Type</code> = <code>Opaque</code> 
- enter <code>hana://</code> + <your hana database endpoint> as parameter <code>url</code>
- enter your DB User as parameter <code>user</code> - e.g. DBADMIN
- enter your DB Password as parameter <code>password</code></p>
<p><img alt="SAP Kyma Secret create" src="../res/sap_btp_kyma_secret_form.png" /></p>
<p>Select <code>Create</code>.</p>
<h3 id="create-deployment">Create deployment</h3>
<p>In this step the required kubernetes artifacts are created by a complex yaml file. </p>
<p>Enter the <code>Namespace Overview</code> and get your cluster id. You will find this at the top.</p>
<p><img alt="SAP BTP Dashboard for cluster id" src="../res/sap_btp_kyma_dashboard_deployment.png" /></p>
<p>Copy the following yaml snippet to the clipboard.</p>
<pre><code class="language-yaml">kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  name: guv-srv-data
  labels:
    app: guv
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 100Mi

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: guv-api
  labels:
    app: guv
spec:
  replicas: 5
  selector:
    matchLabels:
      app: guv
  template:
    metadata:
      labels:
        app: guv
    spec:
      terminationGracePeriodSeconds: 10
      containers:
        - name: guv-api
          image: ghcr.io/b-tocs/btocs_guvapi
          imagePullPolicy: Always
          ports:
            - containerPort: 8000
          env:
            - name: SERVER_ROLE
              value: &quot;demo&quot;
            - name: PYTHONUNBUFFERED
              value: &quot;1&quot;
            - name: B2X_RESTAPI_CORS_ENABLED
              value: &quot;true&quot;
            - name: B2X_RESTAPI_CORS_HOSTS
              value: '[&quot;*&quot;]'
            - name: B2X_RESTAPI_CORS_METHODS
              value: '[&quot;*&quot;]'
            - name: B2X_RESTAPI_CORS_HEADERS
              value: '[&quot;*&quot;]'
            - name: B2X_REDIS_DEFAULT_HOST
              value: guv-kvc
            - name: DB_CONNECT_URL
              valueFrom:
                secretKeyRef:
                  name: guv-db
                  key: url
            - name: DB_USER
              valueFrom:
                secretKeyRef:
                  name: guv-db
                  key: user
            - name: DB_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: guv-db
                  key: password
          volumeMounts:
            - name: guv-srv-data
              mountPath: /data
      volumes:
        - name: guv-srv-data
          persistentVolumeClaim:
            claimName: guv-srv-data

---
apiVersion: v1
kind: Service
metadata:
  name: guv-api
  labels:
    app: guv
spec:
  selector:
    app: guv
  ports:
    - protocol: TCP
      port: 8000
      targetPort: 8000

---
apiVersion: gateway.kyma-project.io/v1beta1
kind: APIRule
metadata:
  labels:
    app.kubernetes.io/name: guv-demo-api
  name: guv-demo-api
  namespace: guv-demo
spec:
  gateway: kyma-system/kyma-gateway
  host: guv-demo-api.&lt;your cluster&gt;.kyma.ondemand.com
  rules:
    - accessStrategies:
        - handler: no_auth
      methods:
        - GET
        - POST
        - PUT
        - DELETE
        - PATCH
        - HEAD
        - OPTIONS
        - CONNECT
        - TRACE
      path: /.*
  service:
    name: guv-api
    port: 8000
</code></pre>
<p>Select the button <code>Upload YAML</code> and insert the clipboard at the left text area.</p>
<p><img alt="SAP BTP YAML Upload" src="../res/sap_btp_kyma_deployment_yaml.png" /></p>
<p>Change the text <code>your cluster id</code> with the id of your cluster: e.g. <code>a12345678</code>. </p>
<p>Tip: You will find this id in the url of the current Kyma dashboard view too.</p>
<p>Push the <code>Upload</code> button now. You should get a success information.</p>
<p><img alt="SAP BTP Deployment Success" src="../res/sap_btp_kyma_deployment_success.png" /></p>
<p>Close the popup.</p>
<h3 id="check-the-guv-api-service">Check the GUV API Service</h3>
<p>Go to <code>Discovery and Network</code> and select <code>API Rules</code>. A new created rule <code>guv-demo-api</code> should be displayed. Select this rule.</p>
<p><img alt="SAP BTP Kyma API rule" src="../res/sap_btp_kyma_api_rule.png" /></p>
<p>You will find the endpoint URL of the GUV API service in <code>Metadata</code> -&gt; `host'. Select this URL.
A local brower should be opened and You will see this output.</p>
<p><img alt="SAP BTP API output" src="../res/sap_btp_kyma_api_endpoint.png" /></p>
<p>Append a <code>/info</code> the the URL and You will get a detailed information.</p>
<p><img alt="SAP BTP API output" src="../res/sap_btp_kyma_api_info.png" /></p>
<h2 id="conclusion-and-further-information">Conclusion and further information</h2>
<p>With these steps you have installed an GUV API service on top of an SAP HANA Cloud database within an kubernetes environment for demo purposes. </p>
<h3 id="scalability">Scalability</h3>
<p>The service runs with 5 replicas to demonstrate the scalabilty. You can modify this by changing the deployment <code>guv-api</code>.</p>
<h3 id="configuration">Configuration</h3>
<p>The service can be configured by environment variables. This can be done by changing the deployment.</p>
<h3 id="security">Security</h3>
<p>The demo service is configured unsecure by default and will be configured by environment variables. See the documentation for the GUV API Service.  </p>
<p>You can add SAP BTP security options by changing the api rule.</p>
<h3 id="additional-services">Additional services</h3>
<p>The GUV API Service can be enhanced by other services in the same namespace like REDIS as Cache, AI or eventing services. See the corresponding documentation and add deployments to your namespace. </p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["search.suggest", "search.highlight", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>